(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(50),s=a.n(c),l=(a(61),a(2)),o=a(3),i=a(5),m=a(4),u=a(6),d=a(142),p=a(140),h=a(144),v=a(25),E=a.n(v),f=a(8),g=a.n(f),b=function(e){e?g.a.defaults.headers.common.Authorization=e:delete g.a.defaults.headers.common.Authorization},w=function(e){return{type:"SET_CURRENT_USER",payload:e}},N=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(w({}))}},y=a(12),O=a(17),j=a(53),k=a(19),x=a(87),C={isAuthenticated:!1,user:{},loading:!1},S={},_=Object(O.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(k.a)({},e,{isAuthenticated:!x(t.payload),user:t.payload});case"USER_LOADING":return Object(k.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),R=[j.a],D=Object(O.e)(_,{},Object(O.d)(O.a.apply(void 0,R),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||O.d)),T=a(139);a(88);function A(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(T.a,{to:"/restaurants/create"},"Create Restaurants And Meals")),r.a.createElement("li",null,r.a.createElement(T.a,{to:"/restaurants"},"All Restaurants")),r.a.createElement("li",null,r.a.createElement(T.a,{to:"/orders"},"Your Orders")),r.a.createElement("li",null,r.a.createElement("b",null,"Hey there,")," ",(e.user.name||"").split(" ")[0]),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.onClick},"Logout")))}var I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(T.a,{to:"/",className:"brand-logo"},r.a.createElement("i",{className:"material-icons"},"code"),"Tomato"),r.a.createElement("div",{"data-target":"mobile-demo",className:"sidenav-trigger show-on-med-and-down"},r.a.createElement("i",{className:"material-icons"},"menu")),0!==Object.keys(e||{}).length?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down list-margin"},r.a.createElement(A,{user:e,onClick:this.onLogoutClick})):null))),r.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},r.a.createElement(A,{user:e,onClick:this.onLogoutClick})))}}]),t}(n.Component),F=Object(y.b)(function(e){return{auth:e.auth}},{logoutUser:N})(I),L=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,"Order food from"," ",r.a.createElement("span",{style:{fontFamily:"monospace"}},"Tomato")),r.a.createElement("br",null),r.a.createElement("div",{className:"col s6"},r.a.createElement(T.a,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Register")),r.a.createElement("div",{className:"col s6"},r.a.createElement(T.a,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Log In")))))}}]),t}(n.Component),U=a(16),M=a(143),P=a(18),W=a.n(P),V=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).onChange=function(t){e.setState(Object(U.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.password,r=a.role,c=a.password2,s=a.email,l={name:a.name,email:s,password:n,password2:c,role:r},o=e.props,i=o.history;(0,o.registerUser)(l,i)},e.onCheckboxChange=function(t){e.setState({role:t.target.checked?"manager":"user"})},e.state={name:"",email:"",password:"",password2:"",errors:{},role:"user"},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/restaurants")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state,t=e.password,a=e.role,n=e.password2,c=e.email,s=e.name,l=e.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(T.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(T.a,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:s,error:l.name,id:"name",type:"text",className:W()("",{invalid:l.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},l.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:c,error:l.email,id:"email",type:"email",className:W()("",{invalid:l.email})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},l.email)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:t,error:l.password,id:"password",type:"password",className:W()("",{invalid:l.password})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},l.password)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:n,error:l.password2,id:"password2",type:"password",className:W()("",{invalid:l.password2})}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("span",{className:"red-text"},l.password2)),r.a.createElement("label",{style:{margin:15},htmlFor:"role"},r.a.createElement("input",{onChange:this.onCheckboxChange,value:"manager"===a,error:l.role,id:"role",type:"checkbox",className:W()("",{invalid:l.role})}),r.a.createElement("span",null," Is Restaurant Manager")),r.a.createElement("span",{className:"red-text"},l.role),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),z=Object(y.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){g.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(M.a)(V)),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).onChange=function(t){e.setState(Object(U.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/restaurants")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/restaurants"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(T.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Login")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(T.a,{to:"/register"},"Register"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:W()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:W()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),G=Object(y.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){g.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=E()(a);t(w(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(B),X=a(55),$=a(141),J=Object(y.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(X.a)(e,["component","auth"]);return r.a.createElement(p.a,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement($.a,{to:"/login"})}}))}),Y=a(7),H=a.n(Y),q=a(15);function K(){return r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))}function Q(e){var t=e.rest,a=t.description,n=t.name,c=t._id;return r.a.createElement("div",{className:"col s4 m4"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},n),r.a.createElement("p",null,a)),r.a.createElement("div",{className:"card-action"},r.a.createElement(T.a,{to:"/restaurants/".concat(c)},"Order Now"))))}var Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={restaurants:[],loading:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(q.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loading:!0}),e.next=4,g()("/api/restaurants");case 4:t=e.sent,this.setState({restaurants:t.data,loading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),this.setState({loading:!1});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.restaurants;return 0!==a.length||t?r.a.createElement("div",{className:"container",style:{width:"100%"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"landing-copy col s12 center-align"},t?r.a.createElement(K,null):r.a.createElement("div",{className:"row"},a.map(function(e){return r.a.createElement(Q,{key:e._id,rest:e})}))))):r.a.createElement("div",{className:"center"},"No Restaurants Found.")}}]),t}(n.Component),ee=(a(93),a(14)),te=a(37),ae=a.n(te);function ne(e){var t=e.onItemAdd,a=e.meal,n=a.description,c=a.name,s=a.price,l=a.total,o=e.onItemRemove;return r.a.createElement("div",{className:"col s12 m12"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},c," - $",s),r.a.createElement("p",null,n)),r.a.createElement("div",{className:"card-action"},r.a.createElement("a",{className:"waves-effect waves-light btn-small"},r.a.createElement("i",{onClick:t,className:"material-icons left"},"add"),l||0,r.a.createElement("i",{onClick:o,className:"material-icons right"},"remove")))))}function re(e){var t=e.disabled,a=e.onSubmit,n=e.orderTotal;return r.a.createElement("div",{className:"footer-copyright"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"waves-effect waves-light btn"},"Order Total: ",n?"$".concat(n):0)),n>0&&r.a.createElement("button",{className:"btn waves-effect waves-light ".concat(t?"disabled":null),type:"submit",name:"action",onClick:a},"Order Now",r.a.createElement("i",{className:"material-icons right"},"send")))}var ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={meals:[],loading:!1,submitting:!1},a.onIncrement=function(e){var t=a.state.meals,n=t[e].total;a.setState({meals:[].concat(Object(ee.a)(t.slice(0,e)),[Object(k.a)({},t[e],{total:(n||0)+1})],Object(ee.a)(t.slice(e+1)))})},a.onDecrement=function(e){var t=a.state.meals,n=t[e].total;n&&a.setState({meals:[].concat(Object(ee.a)(t.slice(0,e)),[Object(k.a)({},t[e],{total:n-1})],Object(ee.a)(t.slice(e+1)))})},a.handleSubmit=Object(q.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={total_amount:a.orderTotal,_restaurant:a.restaurantId,_meals:[]},a.state.meals.forEach(function(e){e.total&&t._meals.push(e._id)}),a.setState({submitting:!0}),e.prev=3,e.next=6,g.a.post("/api/orders",t);case 6:(0,a.props.history.push)("/orders"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),a.setState({submitting:!1}),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,10]])})),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(q.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loading:!0}),e.next=4,g()("/api/restaurants/".concat(this.restaurantId));case 4:t=e.sent,this.setState({meals:t.data._meals,loading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),this.setState({loading:!1});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.meals,c=t.submitting;return 0!==n.length||a?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},a?r.a.createElement(K,null):r.a.createElement("footer",{className:"page-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},(n||[]).map(function(t,a){return r.a.createElement(ne,{key:ae()(t,"name"),meal:t,onItemAdd:function(){return e.onIncrement(a)},onItemRemove:function(){return e.onDecrement(a)}})})),r.a.createElement(re,{orderTotal:this.orderTotal,disabled:c,onSubmit:this.handleSubmit}))))):r.a.createElement("div",{className:"center"},"No Meals Found.")}},{key:"restaurantId",get:function(){return ae()(this.props.match,"params.id")}},{key:"orderTotal",get:function(){return this.state.meals.reduce(function(e,t){return e+t.price*(t.total||0)},0)}}]),t}(n.Component);function se(e){var t=e.order,a=t.description,n=t._restaurant,c=t.status,s=t.total_amount;return r.a.createElement("div",{className:"col s4 m4"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},n.name),r.a.createElement("p",null,a)),r.a.createElement("div",{className:"card-panel teal lighten-2"},["placed","cancelled","processing","in_route","delivered","received"].map(function(t){return r.a.createElement("div",{style:{cursor:"pointer",color:c===t?"green":"unset",fontWeight:c===t?800:"unset"},className:"chip",onClick:function(){return e.onStatusChange(t)}},t)}),r.a.createElement("div",{style:{fontWeight:700}},"Total amt: ",s))))}var le=a(29),oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[],loading:!1},a.onOrderStatusChange=function(){var e=Object(q.a)(H.a.mark(function e(t,n,r){var c;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("/api/orders/".concat(t),{status:n});case 3:(c=Object(le.cloneDeep)(a.state.orders))[r].status=n,a.setState({orders:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(q.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loading:!0}),e.next=4,g()("/api/orders");case 4:t=e.sent,this.setState({orders:t.data,loading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),this.setState({loading:!1});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.orders;return 0!==n.length||a?r.a.createElement("div",{className:"container",style:{width:"100%"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"landing-copy col s12 center-align"},a?r.a.createElement(K,null):r.a.createElement("div",{className:"row"},n.map(function(t,a){return r.a.createElement(se,{key:t._id,order:t,onStatusChange:function(n){return e.onOrderStatusChange(t._id,n,a)}})}))))):r.a.createElement("div",{className:"center"},"No Orders Found.")}}]),t}(n.Component);function ie(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{onChange:e.onNameChange,value:e.name,type:"text"})),r.a.createElement("td",null,r.a.createElement("input",{onChange:e.onPriceChange,value:e.price,type:"number"})),r.a.createElement("td",null,r.a.createElement("input",{onChange:e.onDescriptionChange,value:e.description,type:"text"})),e.meals.length>1&&r.a.createElement("td",null,r.a.createElement("i",{style:{color:"indianred",cursor:"pointer"},className:"material-icons",onClick:e.onDelete},"delete")))}function me(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:e.onChange,value:e.name,id:"name",type:"text"}),r.a.createElement("label",{htmlFor:"name"},"Restaurant Name")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:e.onChange,value:e.type,id:"type",type:"text"}),r.a.createElement("label",{htmlFor:"type"},"Restaurant Type")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:e.onChange,value:e.description,id:"description",type:"text"}),r.a.createElement("label",{htmlFor:"description"},"Restaurant Description")))}function ue(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,e.meals.map(e.render)))}var de=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userInfo:{},_meals:[{name:"",price:0,description:""}]},a.onChange=function(e){a.setState(Object(U.a)({},e.target.id,e.target.value))},a.onAdd=function(){var e=a.state._meals;a.setState({_meals:[].concat(Object(ee.a)(e),[{name:"",price:0,description:""}])})},a.onDelete=function(e){var t=a.state._meals;a.setState({_meals:[].concat(Object(ee.a)(t.slice(0,e)),Object(ee.a)(t.slice(e+1)))})},a.onRowDataChange=function(e,t,n){var r=Object(ee.a)(a.state._meals);a.setState({_meals:[].concat(Object(ee.a)(r.slice(0,n)),[Object(k.a)({},r[n],Object(U.a)({},t,e.target.value))],Object(ee.a)(r.slice(n+1)))})},a.onSubmit=function(){var e=Object(q.a)(H.a.mark(function e(t){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),e.prev=2,e.next=5,g.a.post("/api/restaurants",Object(le.pick)(a.state,["name","type","description","_meals"]));case 5:alert("Restaurant ".concat(a.state.name," successfully created.")),a.props.history.push("/restaurants"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a.setState({loading:!1}),alert("Restaurant creation failed");case 13:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(q.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,g()("/api/users");case 3:t=e.sent,this.setState({userInfo:t.data,loading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.type,c=t.description,s=t.userInfo,l=t._meals;return t.loading?r.a.createElement(K,null):"manager"!==s.role?"You are not authorized.":r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement(me,{onChange:this.onChange,name:a,type:n,description:c}),r.a.createElement("h3",null,"Meals"),r.a.createElement(ue,{meals:l,render:function(t,a){var n=t.price,c=t.description,s=t.name;return r.a.createElement(ie,{key:a,onNameChange:function(t){return e.onRowDataChange(t,"name",a)},name:s,onPriceChange:function(t){return e.onRowDataChange(t,"price",a)},price:n,onDescriptionChange:function(t){return e.onRowDataChange(t,"description",a)},description:c,meals:l,onDelete:function(){return e.onDelete(a)}})}}),r.a.createElement("a",{onClick:this.onAdd,className:"btn-floating btn-large waves-effect waves-light red"},r.a.createElement("i",{className:"material-icons"},"add")),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Create Restaurant")))))}}]),t}(n.Component),pe=Object(y.b)(function(e){return{auth:e.auth}})(de);if(localStorage.jwtToken){var he=localStorage.jwtToken;b(he);var ve=E()(he);D.dispatch(w(ve));var Ee=Date.now()/1e3;ve.exp<Ee&&(D.dispatch(N()),window.location.href="./login")}var fe=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{store:D},r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement(p.a,{exact:!0,path:"/",component:L}),r.a.createElement(p.a,{exact:!0,path:"/register",component:z}),r.a.createElement(p.a,{exact:!0,path:"/login",component:G}),r.a.createElement(h.a,null,r.a.createElement(J,{exact:!0,path:"/restaurants",component:Z}),r.a.createElement(J,{exact:!0,path:"/restaurants/create",component:pe}),r.a.createElement(J,{exact:!0,path:"/restaurants/:id",component:ce}),r.a.createElement(J,{exact:!0,path:"/orders",component:oe})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e,t,a){e.exports=a(137)},61:function(e,t,a){},88:function(e,t,a){},93:function(e,t,a){}},[[56,2,1]]]);
//# sourceMappingURL=main.3bbc20d8.chunk.js.map